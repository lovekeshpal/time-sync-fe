<div class="container mx-auto px-4 py-8">
    <div class="max-w-2xl mx-auto bg-bg-light dark:bg-bg-dark rounded-lg shadow-md p-6">
        <h1 class="text-2xl font-bold text-center mb-6 text-text dark:text-text-light">Create New Timer</h1>

        <form [formGroup]="timerForm" (ngSubmit)="onSubmit()">
            <!-- Timer Name -->
            <div class="mb-4">
                <label for="name" class="block text-sm font-medium text-text dark:text-text-light mb-1">Timer Name
                    *</label>
                <input type="text" id="name" formControlName="name"
                    class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary bg-input-light dark:bg-input-dark text-input-text-light dark:text-input-text-dark"
                    placeholder="Enter a name for your timer">
                <div *ngIf="f['name'].touched && f['name'].invalid" class="text-red-500 text-sm mt-1">
                    <span *ngIf="f['name'].errors?.['required']">Timer name is required</span>
                    <span *ngIf="f['name'].errors?.['maxlength']">Timer name cannot exceed 50 characters</span>
                </div>
            </div>

            <!-- Timer Description -->
            <div class="mb-4">
                <label for="description"
                    class="block text-sm font-medium text-text dark:text-text-light mb-1">Description</label>
                <textarea id="description" formControlName="description" rows="3"
                    class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary bg-input-light dark:bg-input-dark text-input-text-light dark:text-input-text-dark"
                    placeholder="Describe this timer (optional)"></textarea>
                <div *ngIf="f['description'].touched && f['description'].invalid" class="text-red-500 text-sm mt-1">
                    <span *ngIf="f['description'].errors?.['maxlength']">Description cannot exceed 200 characters</span>
                </div>
            </div>

            <!-- Duration Selection -->
            <div class="mb-6">
                <h3 class="text-lg font-medium text-text dark:text-text-light mb-2">Timer Duration</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- Days -->
                    <div>
                        <label for="days"
                            class="block text-sm font-medium text-text dark:text-text-light mb-1">Days</label>
                        <input type="number" id="days" formControlName="days" min="0" max="365"
                            class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary bg-input-light dark:bg-input-dark text-input-text-light dark:text-input-text-dark">
                        <div *ngIf="f['days'].touched && f['days'].invalid" class="text-red-500 text-sm mt-1">
                            <span *ngIf="f['days'].errors?.['min']">Cannot be negative</span>
                            <span *ngIf="f['days'].errors?.['max']">Cannot exceed 365 days</span>
                        </div>
                    </div>

                    <!-- Hours -->
                    <div>
                        <label for="hours"
                            class="block text-sm font-medium text-text dark:text-text-light mb-1">Hours</label>
                        <input type="number" id="hours" formControlName="hours" min="0" max="23"
                            class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary bg-input-light dark:bg-input-dark text-input-text-light dark:text-input-text-dark">
                        <div *ngIf="f['hours'].touched && f['hours'].invalid" class="text-red-500 text-sm mt-1">
                            <span *ngIf="f['hours'].errors?.['min']">Cannot be negative</span>
                            <span *ngIf="f['hours'].errors?.['max']">Cannot exceed 23 hours</span>
                        </div>
                    </div>

                    <!-- Minutes -->
                    <div>
                        <label for="minutes"
                            class="block text-sm font-medium text-text dark:text-text-light mb-1">Minutes</label>
                        <input type="number" id="minutes" formControlName="minutes" min="0" max="59"
                            class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary bg-input-light dark:bg-input-dark text-input-text-light dark:text-input-text-dark">
                        <div *ngIf="f['minutes'].touched && f['minutes'].invalid" class="text-red-500 text-sm mt-1">
                            <span *ngIf="f['minutes'].errors?.['min']">Cannot be negative</span>
                            <span *ngIf="f['minutes'].errors?.['max']">Cannot exceed 59 minutes</span>
                        </div>
                    </div>

                    <!-- Seconds -->
                    <div>
                        <label for="seconds"
                            class="block text-sm font-medium text-text dark:text-text-light mb-1">Seconds</label>
                        <input type="number" id="seconds" formControlName="seconds" min="0" max="59"
                            class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary bg-input-light dark:bg-input-dark text-input-text-light dark:text-input-text-dark">
                        <div *ngIf="f['seconds'].touched && f['seconds'].invalid" class="text-red-500 text-sm mt-1">
                            <span *ngIf="f['seconds'].errors?.['min']">Cannot be negative</span>
                            <span *ngIf="f['seconds'].errors?.['max']">Cannot exceed 59 seconds</span>
                        </div>
                    </div>
                </div>
                <div *ngIf="timerForm.errors?.['durationRequired']" class="text-red-500 text-sm mt-2">
                    At least one duration field must be greater than 0
                </div>
            </div>

            <!-- Timer Settings -->
            <div class="mb-4">
                <h3 class="text-lg font-medium text-text dark:text-text-light mb-2">Timer Settings</h3>

                <div class="space-y-3">
                    <div class="flex items-center">
                        <input type="checkbox" id="isPublic" formControlName="isPublic"
                            class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                        <label for="isPublic" class="ml-2 block text-sm text-text dark:text-text-light">Make timer
                            public</label>
                    </div>

                    <div class="flex items-center">
                        <input type="checkbox" id="showMilliseconds" formControlName="showMilliseconds"
                            class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                        <label for="showMilliseconds" class="ml-2 block text-sm text-text dark:text-text-light">Show
                            milliseconds</label>
                    </div>
                </div>
            </div>

            <!-- Timer Appearance -->
            <div class="mb-6">
                <label for="theme" class="block text-sm font-medium text-text dark:text-text-light mb-1">Theme</label>
                <select id="theme" formControlName="theme"
                    class="w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary bg-input-light dark:bg-input-dark text-input-text-light dark:text-input-text-dark">
                    <option value="default">Default</option>
                    <option value="dark">Dark</option>
                    <option value="light">Light</option>
                </select>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col md:flex-row gap-3 md:justify-end mt-8">
                <button type="button" [routerLink]="'/dashboard'"
                    class="px-4 py-2 border border-gray-300 rounded-md text-text dark:text-text-light hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-300">
                    Cancel
                </button>
                <button type="submit" [disabled]="timerForm.invalid || isSubmitting"
                    class="px-4 py-2 rounded-md bg-primary hover:bg-primary-dark text-text-light font-medium transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                    <ng-container *ngIf="!isSubmitting">Create Timer</ng-container>
                    <ng-container *ngIf="isSubmitting">
                        <span class="flex items-center">
                            <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg"
                                fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                    stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor"
                                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                </path>
                            </svg>
                            Creating...
                        </span>
                    </ng-container>
                </button>
            </div>
        </form>

        <!-- Error message display -->
        <div *ngIf="errorMessage" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded">
            {{ errorMessage }}
        </div>
    </div>
</div>